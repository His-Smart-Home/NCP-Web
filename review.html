<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NetConn Pro - Share a Review</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="site-header">
      <nav class="nav">
        <a class="logo" href="index.html">NetConn Pro</a>
        <div class="nav-links">
          <a href="index.html#services">Services</a>
          <a href="index.html#process">Process</a>
          <a href="index.html#about">About</a>
          <a href="index.html#contact">Contact</a>
        </div>
        <button class="nav-cta" data-contact-modal>Schedule a Call</button>
      </nav>
    </header>

    <main>
      <section class="hero scroll-animate">
        <div class="hero-content">
          <div class="eyebrow">Your feedback keeps us sharp</div>
          <h1>Share your NetConn Pro experience</h1>
          <p>
            Let us know what went well, where we can improve, or how we helped
            your team stay connected and secure.
          </p>
          <div class="hero-actions">
            <a href="#review-form"><button class="primary-btn">Leave a review</button></a>
            <button class="ghost-btn" data-contact-modal>Contact support</button>
          </div>
        </div>
      </section>

      <section class="services scroll-animate" id="review-form">
        <div class="section-title scroll-animate">
          <h2>Tell us about your project</h2>
          <p>
            Reviews are shared with our leadership team and help us deliver a
            better experience for everyone.
          </p>
        </div>
        <form
          class="modal-form review-form scroll-animate"
          data-review-form
          method="post"
          action="https://n8n.netconn.pro/webhook-test/ncp-web-review"
        >
          <input type="text" name="fullName" placeholder="Full name" />
          <input type="email" name="email" placeholder="Email address" />
          <input type="text" name="company" placeholder="Company or organization" />
          <select name="rating" aria-label="Rating">
            <option value="">Rating (select)</option>
            <option value="5">5 - Outstanding</option>
            <option value="4">4 - Great</option>
            <option value="3">3 - Good</option>
            <option value="2">2 - Needs improvement</option>
            <option value="1">1 - Unhappy</option>
          </select>
          <input type="text" name="service" placeholder="Service provided (optional)" />
          <textarea name="message" rows="5" placeholder="Share your experience"></textarea>
          <button type="submit">Send review</button>
          <p class="review-thank-you" role="status" aria-live="polite"></p>
        </form>
      </section>

      <section class="cta scroll-animate">
        <div class="scroll-animate">
          <h2>Need immediate help?</h2>
          <p>
            Our team is ready to respond. Use the contact form to reach us
            directly.
          </p>
        </div>
        <form class="cta-form scroll-animate">
          <button type="button" data-contact-modal>Contact NetConn Pro</button>
        </form>
      </section>
    </main>

    <div class="modal" id="contact-modal" aria-hidden="true">
      <div class="modal-overlay" data-modal-close></div>
      <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="contact-modal-title">
        <button class="modal-close" type="button" data-modal-close aria-label="Close contact form">
          <span aria-hidden="true">&times;</span>
        </button>
        <h2 id="contact-modal-title">Contact Us</h2>
        <p>
          Tell us about your goals and timeline. We'll follow up within one business day.
        </p>
        <form class="modal-form">
          <input type="text" name="fullName" placeholder="Full name" />
          <input type="email" name="email" placeholder="Email address" />
          <input type="text" name="location" placeholder="Location" />
          <textarea name="message" rows="4" placeholder="What do you need help with?"></textarea>
          <button type="submit">Send request</button>
        </form>
      </div>
    </div>

    <footer class="footer scroll-animate">
      <div class="scroll-animate">
        <strong>NetConn Pro</strong>
        <p>Modern networks. Secure operations. Always on.</p>
      </div>
      <div class="footer-links scroll-animate">
        <span>&copy; 2026 NetConn Pro</span>
        <span>hello@netconn.pro</span>
        <span>+44 7706 943666</span>
      </div>
    </footer>

    <script>
      const prefersReducedMotion = window.matchMedia(
        "(prefers-reduced-motion: reduce)"
      ).matches;

      const revealElements = document.querySelectorAll(".scroll-animate");
      if (prefersReducedMotion) {
        revealElements.forEach((element) =>
          element.classList.add("is-visible")
        );
      } else {
        const revealObserver = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("is-visible");
                revealObserver.unobserve(entry.target);
              }
            });
          },
          { threshold: 0.2 }
        );

        revealElements.forEach((element) => revealObserver.observe(element));
      }

      const contactModal = document.getElementById("contact-modal");
      const modalTriggers = document.querySelectorAll("[data-contact-modal]");
      const modalCloseTargets = contactModal.querySelectorAll("[data-modal-close]");

      const openContactModal = () => {
        contactModal.classList.add("is-visible");
        contactModal.setAttribute("aria-hidden", "false");
        document.body.classList.add("modal-open");
      };

      const closeContactModal = () => {
        contactModal.classList.remove("is-visible");
        contactModal.setAttribute("aria-hidden", "true");
        document.body.classList.remove("modal-open");
      };

      modalTriggers.forEach((trigger) => {
        trigger.addEventListener("click", (event) => {
          event.preventDefault();
          openContactModal();
        });
      });

      modalCloseTargets.forEach((target) =>
        target.addEventListener("click", closeContactModal)
      );

      document.addEventListener("keydown", (event) => {
        if (event.key === "Escape" && contactModal.classList.contains("is-visible")) {
          closeContactModal();
        }
      });

      const contactForm = document.querySelector("#contact-modal .modal-form");
      const contactSubmit = contactForm?.querySelector("button[type='submit']");

      if (contactForm) {
        contactForm.addEventListener("submit", async (event) => {
          event.preventDefault();

          const formData = new FormData(contactForm);
          const payload = Object.fromEntries(formData.entries());

          if (contactSubmit) {
            contactSubmit.disabled = true;
            contactSubmit.textContent = "Sending...";
          }

          try {
            const response = await fetch(
              "https://n8n.netconn.pro/webhook/ncp-web-review",
              {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify(payload),
              }
            );

            if (!response.ok) {
              throw new Error("Request failed");
            }

            contactForm.reset();
            closeContactModal();
          } catch (error) {
            console.error("Contact form submission failed:", error);
          } finally {
            if (contactSubmit) {
              contactSubmit.disabled = false;
              contactSubmit.textContent = "Send request";
            }
          }
        });
      }

      const reviewForm = document.querySelector("[data-review-form]");
      const reviewSubmit = reviewForm?.querySelector("button[type='submit']");
      const reviewThankYou = reviewForm?.querySelector(".review-thank-you");

      if (reviewForm) {
        reviewForm.addEventListener("submit", async (event) => {
          event.preventDefault();

          const formData = new FormData(reviewForm);
          const payload = Object.fromEntries(formData.entries());

          if (reviewSubmit) {
            reviewSubmit.disabled = true;
            reviewSubmit.textContent = "Sending...";
          }

          if (reviewThankYou) {
            reviewThankYou.textContent = "";
          }

          try {
            const response = await fetch(reviewForm.action, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(payload),
            });

            if (!response.ok) {
              throw new Error("Request failed");
            }

            reviewForm.reset();
            if (reviewThankYou) {
              reviewThankYou.textContent = "Thanks! Your review has been sent.";
            }
          } catch (error) {
            console.error("Review form submission failed:", error);
            if (reviewThankYou) {
              reviewThankYou.textContent =
                "Sorry, something went wrong. Please try again.";
            }
          } finally {
            if (reviewSubmit) {
              reviewSubmit.disabled = false;
              reviewSubmit.textContent = "Send review";
            }
          }
        });
      }
    </script>
  </body>
</html>
